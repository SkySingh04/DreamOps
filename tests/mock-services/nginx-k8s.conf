server {
    listen 80;
    server_name localhost;
    
    root /usr/share/nginx/html;
    
    # Health check endpoint
    location = /healthz {
        return 200 'ok';
        add_header Content-Type text/plain;
    }
    
    # Kubernetes API endpoints
    location /api/ {
        default_type application/json;
        try_files $uri $uri.json =404;
    }
    
    # Pod logs endpoint (return mock logs)
    location ~ ^/api/v1/namespaces/([^/]+)/pods/([^/]+)/log$ {
        return 200 '{"log": "2025-06-21T10:00:00Z ERROR Database connection timeout\n2025-06-21T10:00:01Z ERROR Retrying connection\n2025-06-21T10:00:02Z ERROR Max retries exceeded"}';
        add_header Content-Type application/json;
    }
    
    # Events endpoint
    location ~ ^/api/v1/namespaces/([^/]+)/events$ {
        return 200 '{"items": [{"type": "Warning", "reason": "BackOff", "message": "Back-off restarting failed container"}]}';
        add_header Content-Type application/json;
    }
}